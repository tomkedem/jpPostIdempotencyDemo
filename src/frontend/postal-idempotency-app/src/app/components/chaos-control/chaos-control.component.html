<div class="premium-container">
  <div class="ambient-grid"></div>

  <div class="content-wrapper">
    <!-- Header Section -->
    <div class="header-section">
      <h1 class="premium-title">מערכת בקרת כאוס</h1>
      <p class="premium-subtitle">בקרה מתקדמת על הגנת אידמפוטנטיות</p>
      <div class="title-accent"></div>
    </div>

    <div class="main-content">
      <!-- Control Panel -->
      <div class="control-panel">
        <div class="panel-header">
          <h2 class="section-title">
            <mat-icon class="title-icon">security</mat-icon>
            הגדרות הגנה
          </h2>
        </div>

        <div class="control-form">
          <div class="control-group">
            <div class="control-frame">
              <mat-slide-toggle
                [formControl]="idempotencyProtectionControl"
                color="primary"
                class="toggle-label"
              >
                <span class="label-primary">הגנת אידמפוטנטיות</span>
                <span class="label-secondary"
                  >מונע עדכונים כפולים באמצעות מפתחות ייחודיים</span
                >
              </mat-slide-toggle>

              <div
                class="status-indicator"
                [class.protected]="idempotencyProtectionControl.value"
              >
                <div class="indicator-light"></div>
                <span class="status-text">
                  {{
                    idempotencyProtectionControl.value
                      ? "מוגן - הגנה פעילה"
                      : "לא מוגן - הגנה כבויה"
                  }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Demo Guide Panel -->
      <div class="demo-panel">
        <div class="panel-header">
          <h2 class="section-title">
            <mat-icon class="title-icon">school</mat-icon>
            מדריך שימוש
          </h2>
        </div>

        <div class="demo-content">
          <div class="demo-step" *ngFor="let step of demoSteps; let i = index">
            <div class="step-number">{{ i + 1 }}</div>
            <div class="step-content">
              <div class="step-text" [innerHTML]="step.text"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Metrics Section -->
    <div class="metrics-section">
      <div class="section-header">
        <h2 class="section-title">
          <mat-icon class="title-icon">analytics</mat-icon>
          מדדי ביצועים
        </h2>
      </div>

      <div
        class="metrics-grid"
        style="
          display: flex;
          flex-wrap: nowrap;
          justify-content: space-between;
          gap: 8px;
        "
      >
        <div class="metric-card success" style="flex: 1; min-width: 0">
          <div class="card-header">
            <mat-icon class="metric-icon">check_circle</mat-icon>
            <span class="metric-title">פעולות מוצלחות</span>
          </div>
          <div class="metric-content">
            <div class="metric-value">
              {{ metrics()?.successfulOperations || 0 }}
            </div>
          </div>
        </div>

        <div class="metric-card warning" style="flex: 1; min-width: 0">
          <div class="card-header">
            <mat-icon class="metric-icon">block</mat-icon>
            <span class="metric-title">חסימות אידמפוטנטיות</span>
          </div>
          <div class="metric-content">
            <div class="metric-value">
              {{ metrics()?.idempotentBlocks || 0 }}
            </div>
          </div>
        </div>

        <div class="metric-card info" style="flex: 1; min-width: 0">
          <div class="card-header">
            <mat-icon class="metric-icon">speed</mat-icon>
            <span class="metric-title">זמן תגובה ממוצע</span>
          </div>
          <div class="metric-content">
            <div class="metric-value">
              {{ metrics()?.averageResponseTime || 0 }}ms
            </div>
          </div>
        </div>
        <div class="metric-card accent" style="flex: 1; min-width: 0">
          <div class="card-header">
            <mat-icon class="metric-icon">percent</mat-icon>
            <span class="metric-title">אחוז הצלחה</span>
          </div>
          <div class="metric-content">
            <div class="metric-value">{{ metrics()?.successRate || 0 }}%</div>
          </div>
        </div>

        <div class="metric-card primary" style="flex: 1; min-width: 0">
          <div class="card-header">
            <mat-icon class="metric-icon">trending_up</mat-icon>
            <span class="metric-title">סה"כ פעולות</span>
          </div>
          <div class="metric-content">
            <div class="metric-value">
              {{ metrics()?.totalOperations || 0 }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
