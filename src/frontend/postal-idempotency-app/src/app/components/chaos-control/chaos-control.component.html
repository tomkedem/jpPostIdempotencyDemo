
<mat-card>
  <div class="chaos-control-header">
    <div class="chaos-control-title">
      בקרת כאוס
      <span style="font-size:1.7rem;vertical-align:middle;">🧪</span>
    </div>
    <div class="chaos-control-subtitle">
      שליטה על התנהגות מנגנון ה-Idempotency
    </div>
  </div>
  <mat-card-content>
    <form [formGroup]="chaosForm" class="chaos-form">
      <div class="toggle-group">
        <mat-slide-toggle formControlName="useIdempotencyKey">
          הפעל מפתחות Idempotency
        </mat-slide-toggle>
        <div class="toggle-description">
          כאשר מופעל, כל בקשה קריטית (POST, PATCH) תישלח עם מפתח ייחודי למניעת כפילויות.
        </div>
      </div>

      @if (chaosForm.get('useIdempotencyKey')?.value) {
        <div class="toggle-group nested-toggle">
          <mat-slide-toggle formControlName="forceError">
            כפה שגיאה (מפתח שגוי)
          </mat-slide-toggle>
          <div class="toggle-description">
            שולח מפתח Idempotency בפורמט לא תקין כדי לבדוק את הטיפול בשגיאות בשרת.
          </div>
        </div>
      }
    </form>
  </mat-card-content>
</mat-card>
